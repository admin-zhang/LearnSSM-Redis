<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--动态SQL-->
<mapper namespace="xyz.codedog.chapter6.mapper.RoleMapper">
    <resultMap id="roleResultMap" type="xyz.codedog.chapter6.pojo.Role">
        <id column="id" property="id"/>
        <result column="role_name" property="roleName"/>
        <result column="note" property="note"/>
    </resultMap>

    <sql id="sel">
        select id,rolt_name,note from t_role
    </sql>
<!--    if元素-->
    <select id="fingRoles" parameterType="string" resultMap="roleResultMap">
        select id,role_name,note from t_role where 1 = 1
        <if test="roleName != null and roleName !=''">
            and role_name like concat('%',#{roleName},'%')
        </if>
    </select>

    <select id="findRoles1" resultType="role" resultMap="roleResultMap">
        <include refid="sel" />
        where 1 = 1
        <choose>
            <when test="id != null and id !=''">
                and id = #{id}
            </when>
            <when test="roleName != null and roleName !=''">
                and role_name like concat('#',#{roleName},'%')
            </when>
            <otherwise>
                and note is not null
            </otherwise>
        </choose>
    </select>
</mapper>